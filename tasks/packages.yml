- name: Add remmina apt repo
  apt_repository:
    repo: ppa:remmina-ppa-team/remmina-next

- name: Add signal key
  apt_key:
    url: https://updates.signal.org/desktop/apt/keys.asc
    state: present
    
- name: Add signal repo
  apt_repository:
    repo: deb [arch=amd64] https://updates.signal.org/desktop/apt xenial main
    state: present

- name: Add vscode key
  apt_key:
    url: https://packages.microsoft.com/keys/microsoft.asc
    state: present

- name: Add vscode repo
  apt_repository:
    repo: deb [arch=amd64] https://packages.microsoft.com/repos/vscode stable main
    state: present

- name: Add chrome key
  apt_key:
    url: https://dl-ssl.google.com/linux/linux_signing_key.pub
    state: present

- name: Add chome repo
  apt_repository:
    repo: deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main
    state: present

- name: Install apt packages
  apt: 
    name: "{{ packages }}"
  vars:
    packages:
    - code
    - snapd
    - htop
    - libreoffice
    - tmux
    - icedtea-netx
    - mesa-utils
    - remmina 
    - remmina-plugin-rdp 
    - remmina-plugin-secret 
    - remmina-plugin-spice
    - thunderbird
    - tlp
    - signal-desktop
    - steam-installer
    - freerdp-x11
    - google-chrome-stable
    - keepassxc

- name: Make sure snapd is running
  systemd:
    state: started
    name: snapd
